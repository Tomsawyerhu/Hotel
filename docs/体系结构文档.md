# 酒店管理系统体系结构文档

## 文档修改历史

| 修改人员 | 日期 | 修改原因 | 版本号 |
| :------: | ---- | -------- | ------ |
| 廖兰宇   | 2020.4.23   | 数据层分解      | v1.0.0     |
| 胡海川   | 2020.4.23   | 业务逻辑层分解  | v1.0.1     |
| 陈思文   | 2020.4.24   | 用户界面层分解  | v1.0.2     |
| 刘瑞麒   | 2020.4.25   | 引言，产品概述，逻辑视图，组合视图   | v1.0.3     |
| 胡海川   | 2020.4.25   | 汇总定稿        | v2.0.0     |

## 目录


## 1 引言

### 1.1 编制目的

本文档完成对酒店管理系统的体系结构设计，从而能够指导后续的详细设计和开发的目的，同时实现测试人员和用户之间的沟通
本文档面向开发人员、测试人员和用户编写，是了解系统的导航



### 1.2 词汇表
| 词汇名称 | 词汇含义 | 备注 |
| :------: | -------- | ---- |
|       _ui   |   相应功能的展示层       |      |
|      _bl   |      相应功能的逻辑层    |      |
| _data          |   相应功能的数据层   |   |



### 1.3 参考资料

1.IEEE 标准 

2.酒店管理系统软件需求规格说明文档

3.软件工程与计算（卷二） 软件开发的技术基础


## 2 产品概述

酒店管理系统通过互联网使人们更方便的预定酒店，保障外出旅游或办公的体验。同时提供酒店工作人员、网站营销人员和网站管理人员的功能，以便对酒店进行合适的管理，能吸引更多的用户，而且能提供更好的体验。


## 3 逻辑视图

酒店管理系统中，选择了分层体系结构风格，将系统分为3层（展示层、业务逻辑层、数据层）。展示层包含GUI页面的实现，业务逻辑层包含业务逻辑处理的实现，数据层负责数据的持久化和访问。分层体系结构的逻辑设计视角和逻辑设计方案如图1和图2所示。

<div style="text-align:center;"><strong>图1 逻辑设计视角<strong/><div/>

![](https://20200425.oss-cn-beijing.aliyuncs.com/%E9%80%BB%E8%BE%91%E8%AE%BE%E8%AE%A1%E8%A7%86%E8%A7%92.png)

<div style="text-align:center;"><strong>图2 逻辑设计方案<strong/><div/>

![](https://20200425.oss-cn-beijing.aliyuncs.com/%E9%80%BB%E8%BE%91%E8%AE%BE%E8%AE%A1%E6%96%B9%E6%A1%88.png)

  

## 4 组合视图

### 4.1 开发包图

| 开发包 | 依赖的其他开发包               |
| :----: | ------------------------------ |
| mainview | userview,hotelmanagerview,vo,adminview,store,router |
|    userview    |        api,userbllmpl,vo                        |
|      userbllmpl |Http,vo
|     userbl  |po,userdataservice,couponbl,hotelbl,orderbl    |
|    userdataservice   |    po                           |
|     userdata  |databaseutility,po,userdataservice    |
|     hotelmanagerview  |   couponbllmpl,hotelbllmpl,vo   |
|    hotelview   |    hotelbllmpl,orderbllmpl,vo    |
|     couponbllmpl  |    Http,vo     |
|     couponbl |   couponbllmpl,coupondataservice    |
|     coupondataservice | po    |
|    coupondata  | coupondataservice,databaseutility,po   |
|    hotelbllmpl  | Http,po  |
|     hotelbl | po,hoteldataservice  |
|     hoteldataservice |po  |
 |    hoteldata  |hoteldataservice,databaseutility,po    |
 |     orderbllmpl | Http,vo    |
 |     orderbl | orderbllmpl,orderdataservice,po,userbl,hotelbl,couponbl   |
 |     orderdataservice | po    |
 |     orderdata | orderdataservice,databaseutility,po    |
 |   adminview   | adminbllmpl   |
 |    adminbllmpl  | Http,vo   |
 |     adminbl | adminbllmpl,admindataservice,hotelbl,couponbl,orderbl   |
 |     admindataservice | po   |
 |      admindata| admindataservice,databaseutility,po    |
 |    databaseutility  | 无 |
 |     vo | 无 |
 |     po | 无 |
 |     Http | 无 |

酒店管理系统客户端开发包如图3所示，服务器端开发包如图4所示。

<div style="text-align:center;"><strong>图3 客户端开发包图<strong/><div/>

![](https://20200425.oss-cn-beijing.aliyuncs.com/%E7%89%A9%E7%90%86%E5%89%8D%E7%AB%AF.png)

<div style="text-align:center;"><strong>图4 服务器端开发包图<strong/><div/>

![](https://20200425.oss-cn-beijing.aliyuncs.com/%E7%89%A9%E7%90%86%E5%90%8E%E7%AB%AF.png)

### 4.2 运行时进程

在酒店管理系统中，会有多个客户端进程和一个服务器端进程,其进程图如图5所示
结合部署图,客户端进程是在客户端机器上运行,服务器端进程在服务器端机器上运行

<div style="text-align:center;"><strong>图5 运行时进程图<strong/><div/>

![](https://202004252.oss-cn-hangzhou.aliyuncs.com/%E8%BF%9B%E7%A8%8B%E5%9B%BE.png)


### 4.3 物理部署

酒店管理系统中客户端构件放在客户端机器上，服务器端构件放在服务器端机器上
部署图如图6所示

<div style="text-align:center;"><strong>图6 物理部署图<strong/><div/>

![](https://202004252.oss-cn-hangzhou.aliyuncs.com/new_%E7%89%A9%E7%90%86%E9%83%A8%E7%BD%B2.png)


## 5 架构设计

### 5.1 模块职责

- 模块视图

客户端模块和服务器模块视图分别如图7和图8所示

<div style="text-align:center;"><strong>图7 客户端模块视图<strong></strong><div></div>

![](https://202004252.oss-cn-hangzhou.aliyuncs.com/%E5%AE%A2%E6%88%B7%E7%AB%AF.png)

<div style="text-align:center;"><strong>图8 服务器端模块视图<strong></strong><div></div>

![](https://202004252.oss-cn-hangzhou.aliyuncs.com/%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%AB%AF.png)


各层职责

|     层     | 职责     |
| :--------: | -------- |
| 客户端启动模块 | 负责初始化网络通信机制，启动用户界面 |
| 客户端展示层 | 客户端界面 |
| 客户端网络模块 | 利用Http进行服务请求 |
| 服务器端启动模块 | 负责初始化网络通信机制，启动用户界面 |
| 服务器端数据层 | 数据访问和持久化 |
| 服务器端业务逻辑层 | 业务逻辑处理 |
| 服务器端网络模块 | 提供Http服务接口 |

层之间调用接口

| 接口 | 服务调用方   | 服务提供方       |
| :--------: | ---------- | ------------------- |
| hotelblservice     | 客户端展示层 | 服务器端业务逻辑层 |
| couponblservice     | 客户端展示层 | 服务器端业务逻辑层 |
| adminblservice     | 客户端展示层 | 服务器端业务逻辑层 |
| userblservice    | 客户端展示层 | 服务器端业务逻辑层 |
| orderblservice     | 客户端展示层 | 服务器端业务逻辑层 
| hoteldataservice     | 服务器端业务逻辑层 | 服务器端数据层 |
| coupondataservice     | 服务器端业务逻辑层 | 服务器端数据层 |
| roomdataservice     | 服务器端业务逻辑层 | 服务器端数据层 |
| userdataservice     | 服务器端业务逻辑层 | 服务器端数据层 |
| orderdataservice     | 服务器端业务逻辑层 | 服务器端数据层 |


### 5.2 用户界面层分解

根据需求，系统存在16个用户界面：用户登录界面、用户注册界面、客户信息查询界面、客户主界面、酒店工作人员主界面、网站营销人员主界面、会员注册界面、
浏览酒店界面、酒店详细信息界面、预定酒店界面、订单查询界面、订单修改界面、订单管理界面、信用值修改界面、制定促销策略界面、调整促销策略界面。界面跳转如图9所示

<div style="text-align:center;"><strong>图9 用户界面跳转<strong></strong><div></div>

![](https://20200425.oss-cn-beijing.aliyuncs.com/%E7%94%A8%E6%88%B7%E7%95%8C%E9%9D%A2%E8%B7%B3%E8%BD%AC.png)

模块设计如图10所示

<div style="text-align:center;"><strong>图10 用户界面层模块设计<strong></strong><div></div>

![](https://20200425.oss-cn-beijing.aliyuncs.com/%E7%94%A8%E6%88%B7%E7%95%8C%E9%9D%A2%E5%B1%82%E6%A8%A1%E5%9D%97%E8%AE%BE%E8%AE%A1.png)

#### 5.2.1 职责

用户界面层模块的职责如表1所示。

<div style="text-align:center;"><strong>表1 用户界面层模块的职责<strong></strong><div></div>


| 模块                   | 职责                                                         |
| ---------------------- | ------------------------------------------------------------ |
| MainView       | 界面View，负责界面的显示和界面的跳转 |
| REST API    | 负责查看、创建、编辑和删除api |
| AdminView       | 提供酒店管理人员信息相关的增删改查服务 |
| CouponView      | 提供优惠券信息相关的增删改查服务 |
| HotelView       | 提供酒店信息相关的增删改查服务 |
| OrderView       | 提供订单信息相关的增删改查服务 |
| UserView        | 提供用户信息相关的增删改查服务 |

#### 5.2.2 接口规范

用户界面层模块的接口规范如表2所示。

<div style="text-align:center;"><strong>表2 MainView模块的接口规范<strong></strong><div></div>


| 供接口                             |                                  |                                                              |
| -------------------------------------- | -------------------------------- | ------------------------------------------------------------ |
| MainFrame                 | 语法<br />前置条件<br />后置条件 | init(args:String[])<br />无<br />显示Frame以及Login|

<div style="text-align:center;"><strong>表3 RESTAPI模块的接口规范<strong></strong><div></div>


| 供接口                             |                                  |                                                              |
| -------------------------------------- | -------------------------------- | ------------------------------------------------------------ |
| REST API             | 语法<br />前置条件<br />后置条件 | const axios({url:,method:,data})<br />无<br />发送HTTP请求至服务器并收到HTTP相应        |

<div style="text-align:center;"><strong>表4 AdminView的接口规范<strong></strong><div></div>


| 需接口                             |                                  |                                                              |
| -------------------------------------- | -------------------------------- | ------------------------------------------------------------ |
| 服务名                                  | 服务                              |                                                           |
| AdminBlService.addManager(UserForm userForm) | 添加酒店管理人员账号                         |                                                           |
| AdminBlService.getAllManagers()              | 获得所有酒店管理人员信息                     |                                                           |

<div style="text-align:center;"><strong>表5 CouponView模块的接口规范<strong></strong><div></div>


| 需接口                             |                                  |                                                              |
| -------------------------------------- | -------------------------------- | ------------------------------------------------------------ |
| 服务名                                  | 服务                              |                                                           |                                                    |
| CouponBlService.getMatchOrderCoupon(OrderVO orderVO) |返回某一订单可用的优惠策略列表                        |                                                           |
| CouponBlService.getHotelAllCoupon(Integer hotelId)              | 查看某个酒店提供的所有优惠策略（包括失效的）                    | 
| CouponBlService.addHotelTargetMoneyCoupon(HotelTargetMoneyCouponVO couponVO)              | 添加酒店满减优惠策略                     | 

<div style="text-align:center;"><strong>表6 HotelView模块的接口规范<strong></strong><div></div>


| 需接口                             |                                  |                                                              |
| -------------------------------------- | -------------------------------- | ------------------------------------------------------------ |
| 服务名                                  | 服务                              |                                                           |                                                    |
| HotelBlService.addHotel(HotelVO hotelVO) |添加酒店                        |                                                           |
| HotelBlService.updateRoomInfo(Integer hotelId, String roomType,Integer rooms)          | 预订酒店修改剩余客房信息                    | 
| HotelBlService.getRoomCurNum(Integer hotelId,String roomType)             | 查看酒店剩余某种房间数量                     | 

<div style="text-align:center;"><strong>表7 OrderView模块的接口规范<strong></strong><div></div>


| 需接口                             |                                  |                                                              |
| -------------------------------------- | -------------------------------- | ------------------------------------------------------------ |
| 服务名                                  | 服务                              |                                                           |                                                    |
| OrderBlService.addOrder(OrderVO orderVO) |预定酒店                        |                                                           |
| OrderBlService.getAllOrders()   | 获得所有订单信息                | 
| OrderBlService.getUserOrders(int userid)             | 获得指定用户的所有订单信息                     | 
| OrderBlService.annulOrder(int orderid)             | 撤销订单                    | 

<div style="text-align:center;"><strong>表8 Accountview模块的接口规范<strong></strong><div></div>


| 需接口                             |                                  |                                                              |
| -------------------------------------- | -------------------------------- | ------------------------------------------------------------ |
| 服务名                                  | 服务                              |                                                           |                                                    |
| AccountBlService.registerAccount(UserVO userVO) |注册账号                        |                                                           |
| AccountBlService.login(UserForm userForm)  | 用户登录，登录成功会将用户信息保存再session中              | 
| AccountBlService.getUserInfo(int id)            | 获取用户个人信息                 | 
| AccountBlService.updateUserInfo(int id, String password,String username,String phonenumber)            | 更新用户个人信息                    | 



### 5.3 业务逻辑层分解

业务逻辑层包含多个针对界面的业务逻辑处理对象

![](https://homework2020.oss-cn-hangzhou.aliyuncs.com/%E4%B8%9A%E5%8A%A1%E9%80%BB%E8%BE%91%E5%B1%82%E7%B1%BB%E5%9B%BE.png)

<div style="text-align:center;"><strong>图11 业务逻辑层的设计<strong/><div/>

#### 5.3.1 职责

| 模块              | 职责                             |
| ----------------- | -------------------------------- |
| AdminBl           | 负责实现酒店管理人员信息所需要的服务 |
| CouponBl          | 负责实现优惠策略所需要的服务 |
| HotelBl           | 负责实现酒店信息所需要的服务 |
| UserBl            | 负责实现用户信息所需要的服务 |
| OrderBl           | 负责实现订单信息所需要的服务 |


#### 5.3.2 接口规范



<div style="text-align:center;"><strong>表9 adminbl 模块的接口规范<strong/><div/>


<table border="0" cellpadding="0" cellspacing="0" width="558" >
 <colgroup><col width="151" style="mso-width-source:userset;mso-width-alt:5376;width:113pt">
 <col width="150" style="mso-width-source:userset;mso-width-alt:5319;width:112pt">
 <col width="129" style="mso-width-source:userset;mso-width-alt:4579;width:97pt">
 <col width="64" span="2" style="width:48pt">
 </colgroup><tbody><tr height="18" style="height:13.8pt">
  <td colspan="3" height="18" class="xl66" width="430" style="height:13.8pt;width:322pt">提供的服务（供接口）</td>
  <td width="64" style="width:48pt"></td>
  <td width="64" style="width:48pt"></td>
 </tr>
  <td class="xl65">无</td>
  <td colspan="2" style="mso-ignore:colspan"></td>
 </tr>

 <tr height="18" style="height:13.8pt">
  <td rowspan="3" height="54" class="xl65" style="height:41.4pt">AdminService.addManager</td>
  <td class="xl65">语法</td>
  <td class="xl65">public addManager(UserForm userForm)；</td>
  <td colspan="2" style="mso-ignore:colspan"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td height="18" class="xl65" style="height:13.8pt">前置条件</td>
  <td class="xl65">已登录管理员账号</td>
  <td colspan="2" style="mso-ignore:colspan"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td height="18" class="xl65" style="height:13.8pt">后置条件</td>
  <td class="xl65">更新酒店经理列表</td>
  <td colspan="2" style="mso-ignore:colspan"></td>
 </tr>

 <tr height="18" style="height:13.8pt">
  <td rowspan="3" height="54" class="xl65" style="height:41.4pt">AdminService.getAllManagers()</td>
  <td class="xl65">语法</td>
  <td class="xl65">public getAllManagers()；</td>
  <td colspan="2" style="mso-ignore:colspan"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td height="18" class="xl65" style="height:13.8pt">前置条件</td>
  <td class="xl65">已登录管理员账号</td>
  <td colspan="2" style="mso-ignore:colspan"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td height="18" class="xl65" style="height:13.8pt">后置条件</td>
  <td class="xl65">无</td>
  <td colspan="2" style="mso-ignore:colspan"></td>
 </tr>


 <tr height="18" style="height:13.8pt">
  <td colspan="3" height="18" class="xl66" style="height:13.8pt">需要的接口（需接口）</td>
  <td colspan="2" style="mso-ignore:colspan"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td colspan="2" height="18" class="xl65" style="height:13.8pt">AdminMapper.getAllManagers()</span></td>
  <td class="xl65">返回酒店经理列表</td>
  <td colspan="2" style="mso-ignore:colspan"></td>
 </tr>

 <tr height="18" style="height:13.8pt">
  <td colspan="2" height="18" class="xl65" style="height:13.8pt">enums.UserType</td>
  <td class="xl65">用户类型枚举类</td>
  <td colspan="2" style="mso-ignore:colspan"></td>
 </tr>

 <tr height="18" style="height:13.8pt">
  <td colspan="2" height="18" class="xl65" style="height:13.8pt">po.User</td>
  <td class="xl65">用户实体类</td>
  <td colspan="2" style="mso-ignore:colspan"></td>
 </tr>

 <tr height="18" style="height:13.8pt">
  <td colspan="2" height="18" class="xl65" style="height:13.8pt">vo.ResponseVO</td>
  <td class="xl65">检查调用是否成功</td>
  <td colspan="2" style="mso-ignore:colspan"></td>
 </tr>

 <tr height="18" style="height:13.8pt">
  <td colspan="2" height="18" class="xl65" style="height:13.8pt">vo.UserForm</td>
  <td class="xl65">用户信息表单值类</td>
  <td colspan="2" style="mso-ignore:colspan"></td>
 </tr>
 
</tbody>
</table>





<div style="text-align:center;"><strong>表10 couponbl 模块的接口规范<strong/><div/>


<table border="0" cellpadding="0" cellspacing="0" width="558" >
 <colgroup><col width="151" style="mso-width-source:userset;mso-width-alt:5376;width:113pt">
 <col width="150" style="mso-width-source:userset;mso-width-alt:5319;width:112pt">
 <col width="129" style="mso-width-source:userset;mso-width-alt:4579;width:97pt">
 <col width="64" span="2" style="width:48pt">
 </colgroup><tbody><tr height="18" style="height:13.8pt">
  <td colspan="3" height="18" class="xl66" width="430" style="height:13.8pt;width:322pt">提供的服务（供接口）</td>
  <td width="64" style="width:48pt"></td>
  <td width="64" style="width:48pt"></td>
 </tr>

 <tr height="18" style="height:13.8pt">
  <td rowspan="3" height="54" class="xl65" style="height:41.4pt">CouponMatchStrategy.isMatch</td>
  <td class="xl65">语法</td>
  <td colspan="3" style="mso-ignore:colspan">public CouponMatchStrategy.isMatch(OrderVO orderVO, Coupon coupon)；</td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td height="18" class="xl65" style="height:13.8pt">前置条件</td>
  <td class="xl65">无</td>
  <td colspan="2" style="mso-ignore:colspan"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td height="18" class="xl65" style="height:13.8pt">后置条件</td>
  <td class="xl65">无</td>
  <td colspan="2" style="mso-ignore:colspan"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td rowspan="3" height="54" class="xl65" style="height:41.4pt">CouponService.getMatchOrderCoupon</td>
  <td class="xl65">语法</td>
  <td class="xl65">public getMatchOrderCoupon(OrderVO orderVO)；</td>
  <td colspan="2" style="mso-ignore:colspan"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td height="18" class="xl65" style="height:13.8pt">前置条件</td>
  <td class="xl65">无</td>
  <td colspan="2" style="mso-ignore:colspan"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td height="18" class="xl65" style="height:13.8pt">后置条件</td>
  <td class="xl65">无</td>
  <td colspan="2" style="mso-ignore:colspan"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td rowspan="3" height="54" class="xl65" style="height:41.4pt">CouponService.addHotelTargetMoneyCoupon</td>
  <td class="xl65">语法</td>
  <td class="xl65">public addHotelTargetMoneyCoupon(HotelTargetMoneyCouponVO couponVO)；</td>
  <td colspan="2" style="mso-ignore:colspan"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td height="18" class="xl65" style="height:13.8pt">前置条件</td>
  <td class="xl65">无</td>
  <td colspan="2" style="mso-ignore:colspan"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td height="18" class="xl65" style="height:13.8pt">后置条件</td>
  <td class="xl65">更新酒店优惠策略</td>
  <td colspan="2" style="mso-ignore:colspan"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td rowspan="3" height="54" class="xl65" style="height:41.4pt">CouponService.getHotelAllCoupon</td>
  <td class="xl65">语法</td>
  <td class="xl65">public getHotelAllCoupon(Integer hotelId)；</td>
  <td colspan="2" style="mso-ignore:colspan"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td height="18" class="xl65" style="height:13.8pt">前置条件</td>
  <td class="xl65">无</td>
  <td colspan="2" style="mso-ignore:colspan"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td height="18" class="xl65" style="height:13.8pt">后置条件</td>
  <td class="xl65">无</td>
  <td colspan="2" style="mso-ignore:colspan"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td colspan="3" height="18" class="xl66" style="height:13.8pt">需要的接口（需接口）</td>
  <td colspan="2" style="mso-ignore:colspan"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td colspan="2" height="18" class="xl65" style="height:13.8pt">CouponMapper.selectByHotelId(Integer hotelId)</span></td>
  <td class="xl65">根据id返回酒店列表</td>
  <td colspan="2" style="mso-ignore:colspan"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td colspan="2" height="18" class="xl65" style="height:13.8pt">CouponMapper.insertCoupon(Coupon coupon)</td>
  <td class="xl65">新增优惠策略</td>
  <td colspan="2" style="mso-ignore:colspan"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td colspan="2" height="18" class="xl65" style="height:13.8pt">vo.OrderVO</td>
  <td class="xl65">订单虚拟类</td>
  <td colspan="2" style="mso-ignore:colspan"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td colspan="2" height="18" class="xl65" style="height:13.8pt">vo.CouponVO</td>
  <td class="xl65">优惠策略虚拟类</td>
  <td colspan="2" style="mso-ignore:colspan"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td colspan="2" height="18" class="xl65" style="height:13.8pt">vo.HotelTargetMoneyCouponVO</td>
  <td class="xl65">满减优惠策略虚拟类</td>
  <td colspan="2" style="mso-ignore:colspan"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td colspan="2" height="18" class="xl65" style="height:13.8pt">po.Coupon</td>
  <td class="xl65">优惠策略实体类</td>
  <td colspan="2" style="mso-ignore:colspan"></td>
 </tr>

</tbody>
</table>



<div style="text-align:center;"><strong>表11 HotelBl 模块的接口规范<strong/><div/>

<table border="0" cellpadding="0" cellspacing="0" width="558" >
 <colgroup><col width="151" style="mso-width-source:userset;mso-width-alt:5376;width:113pt">
 <col width="150" style="mso-width-source:userset;mso-width-alt:5319;width:112pt">
 <col width="129" style="mso-width-source:userset;mso-width-alt:4579;width:97pt">
 <col width="64" span="2" style="width:48pt">
 </colgroup><tbody><tr height="18" style="height:13.8pt">
  <td colspan="3" height="18" class="xl66" width="430" style="height:13.8pt;width:322pt">提供的服务（供接口）</td>
  <td width="64" style="width:48pt"></td>
  <td width="64" style="width:48pt"></td>
 </tr>  
  <td class="xl65">无</td>
  <td colspan="2" style="mso-ignore:colspan"></td>
 </tr>

 <tr height="18" style="height:13.8pt">
  <td rowspan="3" height="54" class="xl65" style="height:41.4pt">HotelService.addHotel</td>
  <td class="xl65">语法</td>
  <td class="xl65">public addHotel(HotelVO hotelVO)；</td>
  <td colspan="2" style="mso-ignore:colspan"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td height="18" class="xl65" style="height:13.8pt">前置条件</td>
  <td class="xl65">已登录酒店经理账号</td>
  <td colspan="2" style="mso-ignore:colspan"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td height="18" class="xl65" style="height:13.8pt">后置条件</td>
  <td class="xl65">更新酒店列表</td>
  <td colspan="2" style="mso-ignore:colspan"></td>
 </tr>

 <tr height="18" style="height:13.8pt">
  <td rowspan="3" height="54" class="xl65" style="height:41.4pt">HotelService.updateRoomInfo</td>
  <td class="xl65">语法</td>
  <td class="xl65">public updateRoomInfo(Integer hotelId, String roomType,Integer rooms)；</td>
  <td colspan="2" style="mso-ignore:colspan"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td height="18" class="xl65" style="height:13.8pt">前置条件</td>
  <td class="xl65">已登录酒店经理账号</td>
  <td colspan="2" style="mso-ignore:colspan"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td height="18" class="xl65" style="height:13.8pt">后置条件</td>
  <td class="xl65">更新剩余客房信息</td>
  <td colspan="2" style="mso-ignore:colspan"></td>
 </tr>

 <tr height="18" style="height:13.8pt">
  <td rowspan="3" height="54" class="xl65" style="height:41.4pt">HotelService.retrieveHotels</td>
  <td class="xl65">语法</td>
  <td class="xl65">public retrieveHotels()；</td>
  <td colspan="2" style="mso-ignore:colspan"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td height="18" class="xl65" style="height:13.8pt">前置条件</td>
  <td class="xl65">已登录酒店经理账号</td>
  <td colspan="2" style="mso-ignore:colspan"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td height="18" class="xl65" style="height:13.8pt">后置条件</td>
  <td class="xl65">无</td>
  <td colspan="2" style="mso-ignore:colspan"></td>
 </tr>
 
  <tr height="18" style="height:13.8pt">
  <td rowspan="3" height="54" class="xl65" style="height:41.4pt">HotelService. retrieveHotelDetails</td>
  <td class="xl65">语法</td>
  <td class="xl65">public retrieveHotelDetails(Integer hotelId)；</td>
  <td colspan="2" style="mso-ignore:colspan"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td height="18" class="xl65" style="height:13.8pt">前置条件</td>
  <td class="xl65">已登录酒店经理账号</td>
  <td colspan="2" style="mso-ignore:colspan"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td height="18" class="xl65" style="height:13.8pt">后置条件</td>
  <td class="xl65">无</td>
  <td colspan="2" style="mso-ignore:colspan"></td>
 </tr>

 <tr height="18" style="height:13.8pt">
  <td rowspan="3" height="54" class="xl65" style="height:41.4pt">HotelService.getRoomCurNum</td>
  <td class="xl65">语法</td>
  <td class="xl65">public getRoomCurNum(Integer hotelId,String roomType)；</td>
  <td colspan="2" style="mso-ignore:colspan"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td height="18" class="xl65" style="height:13.8pt">前置条件</td>
  <td class="xl65">已登录酒店经理账号</td>
  <td colspan="2" style="mso-ignore:colspan"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td height="18" class="xl65" style="height:13.8pt">后置条件</td>
  <td class="xl65">无</td>
  <td colspan="2" style="mso-ignore:colspan"></td>
 </tr>

 <tr height="18" style="height:13.8pt">
  <td rowspan="3" height="54" class="xl65" style="height:41.4pt">HotelService.deleteHotel</td>
  <td class="xl65">语法</td>
  <td class="xl65">public deleteHotel(Integer hotelId)；</td>
  <td colspan="2" style="mso-ignore:colspan"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td height="18" class="xl65" style="height:13.8pt">前置条件</td>
  <td class="xl65">已登录酒店经理账号</td>
  <td colspan="2" style="mso-ignore:colspan"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td height="18" class="xl65" style="height:13.8pt">后置条件</td>
  <td class="xl65">更新酒店列表</td>
  <td colspan="2" style="mso-ignore:colspan"></td>
 </tr>

  <tr height="18" style="height:13.8pt">
  <td rowspan="3" height="54" class="xl65" style="height:41.4pt">RoomService.retrieveHotelRoomInfo</td>
  <td class="xl65">语法</td>
  <td class="xl65">public retrieveHotelRoomInfo(Integer hotelId)；</td>
  <td colspan="2" style="mso-ignore:colspan"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td height="18" class="xl65" style="height:13.8pt">前置条件</td>
  <td class="xl65">已登录酒店经理账号</td>
  <td colspan="2" style="mso-ignore:colspan"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td height="18" class="xl65" style="height:13.8pt">后置条件</td>
  <td class="xl65">无</td>
  <td colspan="2" style="mso-ignore:colspan"></td>
 </tr>

 <tr height="18" style="height:13.8pt">
  <td rowspan="3" height="54" class="xl65" style="height:41.4pt">RoomService.insertRoomInfo</td>
  <td class="xl65">语法</td>
  <td class="xl65">public insertRoomInfo(HotelRoom hotelRoom)；</td>
  <td colspan="2" style="mso-ignore:colspan"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td height="18" class="xl65" style="height:13.8pt">前置条件</td>
  <td class="xl65">已登录酒店经理账号</td>
  <td colspan="2" style="mso-ignore:colspan"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td height="18" class="xl65" style="height:13.8pt">后置条件</td>
  <td class="xl65">更新客房列表</td>
  <td colspan="2" style="mso-ignore:colspan"></td>
 </tr>

 <tr height="18" style="height:13.8pt">
  <td rowspan="3" height="54" class="xl65" style="height:41.4pt">RoomService.updateRoomInfo</td>
  <td class="xl65">语法</td>
  <td class="xl65">public updateRoomInfo(Integer hotelId, String roomType, Integer rooms)；</td>
  <td colspan="2" style="mso-ignore:colspan"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td height="18" class="xl65" style="height:13.8pt">前置条件</td>
  <td class="xl65">已登录酒店经理账号</td>
  <td colspan="2" style="mso-ignore:colspan"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td height="18" class="xl65" style="height:13.8pt">后置条件</td>
  <td class="xl65">更新客房房间数量</td>
  <td colspan="2" style="mso-ignore:colspan"></td>
 </tr>

  <tr height="18" style="height:13.8pt">
  <td rowspan="3" height="54" class="xl65" style="height:41.4pt">RoomService.getRoomCurNum</td>
  <td class="xl65">语法</td>
  <td class="xl65">public getRoomCurNum(Integer hotelId, String roomType)；</td>
  <td colspan="2" style="mso-ignore:colspan"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td height="18" class="xl65" style="height:13.8pt">前置条件</td>
  <td class="xl65">已登录酒店经理账号</td>
  <td colspan="2" style="mso-ignore:colspan"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td height="18" class="xl65" style="height:13.8pt">后置条件</td>
  <td class="xl65">无</td>
  <td colspan="2" style="mso-ignore:colspan"></td>
 </tr>



 <tr height="18" style="height:13.8pt">
  <td colspan="3" height="18" class="xl66" style="height:13.8pt">需要的接口（需接口）</td>
  <td colspan="2" style="mso-ignore:colspan"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td colspan="2" height="18" class="xl65" style="height:13.8pt"> AccountService.getUserInfo(int id)()</span></td>
  <td class="xl65">返回用户信息</td>
  <td colspan="2" style="mso-ignore:colspan"></td>
 </tr>

 <tr height="18" style="height:13.8pt">
  <td colspan="2" height="18" class="xl65" style="height:13.8pt">HotelMapper.insertHotel(Hotel hotel)</td>
  <td class="xl65">新增酒店</td>
  <td colspan="2" style="mso-ignore:colspan"></td>
 </tr>

 <tr height="18" style="height:13.8pt">
  <td colspan="2" height="18" class="xl65" style="height:13.8pt">HotelMapper.selectAllHotel()</td>
  <td class="xl65">返回酒店列表</td>
  <td colspan="2" style="mso-ignore:colspan"></td>
 </tr>

 <tr height="18" style="height:13.8pt">
  <td colspan="2" height="18" class="xl65" style="height:13.8pt">HotelMapper.selectById(Integer id)</td>
  <td class="xl65">根据id返回酒店虚拟类</td>
  <td colspan="2" style="mso-ignore:colspan"></td>
 </tr>

 <tr height="18" style="height:13.8pt">
  <td colspan="2" height="18" class="xl65" style="height:13.8pt">HotelMapper.deleteHotel(int hotelId)</td>
  <td class="xl65">根据id删除酒店</td>
  <td colspan="2" style="mso-ignore:colspan"></td>
 </tr>

 <tr height="18" style="height:13.8pt">
  <td colspan="2" height="18" class="xl65" style="height:13.8pt">enums.BizRegion</td>
  <td class="xl65">酒店地域信息枚举类</td>
  <td colspan="2" style="mso-ignore:colspan"></td>
 </tr>

 <tr height="18" style="height:13.8pt">
  <td colspan="2" height="18" class="xl65" style="height:13.8pt">enums.HotelStar</td>
  <td class="xl65">酒店星级枚举类</td>
  <td colspan="2" style="mso-ignore:colspan"></td>
 </tr>

 <tr height="18" style="height:13.8pt">
  <td colspan="2" height="18" class="xl65" style="height:13.8pt">enums.UserType</td>
  <td class="xl65">用户类型枚举类</td>
  <td colspan="2" style="mso-ignore:colspan"></td>
 </tr>

 <tr height="18" style="height:13.8pt">
  <td colspan="2" height="18" class="xl65" style="height:13.8pt">po.Hotel</td>
  <td class="xl65">酒店实体类</td>
  <td colspan="2" style="mso-ignore:colspan"></td>
 </tr>
 
 <tr height="18" style="height:13.8pt">
  <td colspan="2" height="18" class="xl65" style="height:13.8pt">po.HotelRoom</td>
  <td class="xl65">酒店客房实体类</td>
  <td colspan="2" style="mso-ignore:colspan"></td>
 </tr>
 
 <tr height="18" style="height:13.8pt">
  <td colspan="2" height="18" class="xl65" style="height:13.8pt">po.User</td>
  <td class="xl65">用户实体类</td>
  <td colspan="2" style="mso-ignore:colspan"></td>
 </tr>

 <tr height="18" style="height:13.8pt">
  <td colspan="2" height="18" class="xl65" style="height:13.8pt">vo.HotelVO</td>
  <td class="xl65">酒店值类</td>
  <td colspan="2" style="mso-ignore:colspan"></td>
 </tr>

 <tr height="18" style="height:13.8pt">
  <td colspan="2" height="18" class="xl65" style="height:13.8pt">vo.RoomVO</td>
  <td class="xl65">客房值类</td>
  <td colspan="2" style="mso-ignore:colspan"></td>
 </tr>
 
</tbody>
</table>



<div style="text-align:center;"><strong>表12 orderbl 模块的接口规范<strong/><div/>


<table border="0" cellpadding="0" cellspacing="0" width="558" >
 <colgroup><col width="151" style="mso-width-source:userset;mso-width-alt:5376;width:113pt">
 <col width="150" style="mso-width-source:userset;mso-width-alt:5319;width:112pt">
 <col width="129" style="mso-width-source:userset;mso-width-alt:4579;width:97pt">
 <col width="64" span="2" style="width:48pt">
 </colgroup><tbody><tr height="18" style="height:13.8pt">
  <td colspan="3" height="18" class="xl66" width="430" style="height:13.8pt;width:322pt">提供的服务（供接口）</td>
  <td width="64" style="width:48pt"></td>
  <td width="64" style="width:48pt"></td>
 </tr>
  <td class="xl65">无</td>
  <td colspan="2" style="mso-ignore:colspan"></td>
 </tr>

 <tr height="18" style="height:13.8pt">
  <td rowspan="3" height="54" class="xl65" style="height:41.4pt">OrderService.addOrder</td>
  <td class="xl65">语法</td>
  <td class="xl65">public addOrder(OrderVO orderVO)；</td>
  <td colspan="2" style="mso-ignore:colspan"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td height="18" class="xl65" style="height:13.8pt">前置条件</td>
  <td class="xl65">已登录用户账号</td>
  <td colspan="2" style="mso-ignore:colspan"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td height="18" class="xl65" style="height:13.8pt">后置条件</td>
  <td class="xl65">更新订单列表</td>
  <td colspan="2" style="mso-ignore:colspan"></td>
 </tr>

 <tr height="18" style="height:13.8pt">
  <td rowspan="3" height="54" class="xl65" style="height:41.4pt"> OrderService.getUserOrders</td>
  <td class="xl65">语法</td>
  <td class="xl65">public getUserOrders(int userid)；</td>
  <td colspan="2" style="mso-ignore:colspan"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td height="18" class="xl65" style="height:13.8pt">前置条件</td>
  <td class="xl65">已登录用户账号</td>
  <td colspan="2" style="mso-ignore:colspan"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td height="18" class="xl65" style="height:13.8pt">后置条件</td>
  <td class="xl65">无</td>
  <td colspan="2" style="mso-ignore:colspan"></td>
 </tr>

 <tr height="18" style="height:13.8pt">
  <td rowspan="3" height="54" class="xl65" style="height:41.4pt"> OrderService.getUserOrders</td>
  <td class="xl65">语法</td>
  <td class="xl65">public getUserOrders(int userid)；</td>
  <td colspan="2" style="mso-ignore:colspan"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td height="18" class="xl65" style="height:13.8pt">前置条件</td>
  <td class="xl65">已登录用户账号</td>
  <td colspan="2" style="mso-ignore:colspan"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td height="18" class="xl65" style="height:13.8pt">后置条件</td>
  <td class="xl65">无</td>
  <td colspan="2" style="mso-ignore:colspan"></td>
 </tr>



 <tr height="18" style="height:13.8pt">
  <td rowspan="3" height="54" class="xl65" style="height:41.4pt">OrderService.annulOrder</td>
  <td class="xl65">语法</td>
  <td class="xl65">public annulOrder(int orderid)；</td>
  <td colspan="2" style="mso-ignore:colspan"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td height="18" class="xl65" style="height:13.8pt">前置条件</td>
  <td class="xl65">已登录用户账号</td>
  <td colspan="2" style="mso-ignore:colspan"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td height="18" class="xl65" style="height:13.8pt">后置条件</td>
  <td class="xl65">更新订单列表</td>
  <td colspan="2" style="mso-ignore:colspan"></td>
 </tr>

 <tr height="18" style="height:13.8pt">
  <td rowspan="3" height="54" class="xl65" style="height:41.4pt">OrderService.getHotelOrders</td>
  <td class="xl65">语法</td>
  <td class="xl65">public getHotelOrders(Integer hotelId)；</td>
  <td colspan="2" style="mso-ignore:colspan"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td height="18" class="xl65" style="height:13.8pt">前置条件</td>
  <td class="xl65">已登录酒店经理账号</td>
  <td colspan="2" style="mso-ignore:colspan"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td height="18" class="xl65" style="height:13.8pt">后置条件</td>
  <td class="xl65">无</td>
  <td colspan="2" style="mso-ignore:colspan"></td>
 </tr>


 <tr height="18" style="height:13.8pt">
  <td colspan="3" height="18" class="xl66" style="height:13.8pt">需要的接口（需接口）</td>
  <td colspan="2" style="mso-ignore:colspan"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td colspan="2" height="18" class="xl65" style="height:13.8pt">OrderMapper.addOrder(Order order)</span></td>
  <td class="xl65">新增订单</td>
  <td colspan="2" style="mso-ignore:colspan"></td>
 </tr>

 <tr height="18" style="height:13.8pt">
  <td colspan="2" height="18" class="xl65" style="height:13.8pt">OrderMapper.getAllOrders()</td>
  <td class="xl65">返回订单列表</td>
  <td colspan="2" style="mso-ignore:colspan"></td>
 </tr>

 <tr height="18" style="height:13.8pt">
  <td colspan="2" height="18" class="xl65" style="height:13.8pt">OrderMapper.getUserOrders(int userid)</td>
  <td class="xl65">返回指定用户订单列表</td>
  <td colspan="2" style="mso-ignore:colspan"></td>
 </tr>

 <tr height="18" style="height:13.8pt">
  <td colspan="2" height="18" class="xl65" style="height:13.8pt">OrderMapper.annulOrder(int orderid)</td>
  <td class="xl65">根据id撤销订单</td>
  <td colspan="2" style="mso-ignore:colspan"></td>
 </tr>

 <tr height="18" style="height:13.8pt">
  <td colspan="2" height="18" class="xl65" style="height:13.8pt">HotelService.updateRoomInfo(Integer hotelId, String roomType,Integer rooms)</td>
  <td class="xl65">更新剩余客房信息</td>
  <td colspan="2" style="mso-ignore:colspan"></td>
 </tr>

 <tr height="18" style="height:13.8pt">
  <td colspan="2" height="18" class="xl65" style="height:13.8pt">HotelService.getRoomCurNum(Integer hotelId,String roomType)</td>
  <td class="xl65">查看酒店剩余某种房间数量</td>
  <td colspan="2" style="mso-ignore:colspan"></td>
 </tr>

 <tr height="18" style="height:13.8pt">
  <td colspan="2" height="18" class="xl65" style="height:13.8pt">AccountService.getUserInfo(int id)</td>
  <td class="xl65">获取用户个人信息</td>
  <td colspan="2" style="mso-ignore:colspan"></td>
 </tr>

 <tr height="18" style="height:13.8pt">
  <td colspan="2" height="18" class="xl65" style="height:13.8pt">po.Order</td>
  <td class="xl65">订单实体类</td>
  <td colspan="2" style="mso-ignore:colspan"></td>
 </tr>
 
 <tr height="18" style="height:13.8pt">
  <td colspan="2" height="18" class="xl65" style="height:13.8pt">po.User</td>
  <td class="xl65">用户实体类</td>
  <td colspan="2" style="mso-ignore:colspan"></td>
 </tr>

 <tr height="18" style="height:13.8pt">
  <td colspan="2" height="18" class="xl65" style="height:13.8pt">vo.OrderVO</td>
  <td class="xl65">订单值类</td>
  <td colspan="2" style="mso-ignore:colspan"></td>
 </tr>

 <tr height="18" style="height:13.8pt">
  <td colspan="2" height="18" class="xl65" style="height:13.8pt">ResponseVO</td>
  <td class="xl65">检查调用是否成功</td>
  <td colspan="2" style="mso-ignore:colspan"></td>
 </tr>


</tbody>
</table>




<div style="text-align:center;"><strong>表13 userbl 模块的接口规范<strong/><div/>

<table border="0" cellpadding="0" cellspacing="0" width="558" >
 <colgroup><col width="151" style="mso-width-source:userset;mso-width-alt:5376;width:113pt">
 <col width="150" style="mso-width-source:userset;mso-width-alt:5319;width:112pt">
 <col width="129" style="mso-width-source:userset;mso-width-alt:4579;width:97pt">
 <col width="64" span="2" style="width:48pt">
 </colgroup><tbody><tr height="18" style="height:13.8pt">
  <td colspan="3" height="18" class="xl66" width="430" style="height:13.8pt;width:322pt">提供的服务（供接口）</td>
  <td width="64" style="width:48pt"></td>
  <td width="64" style="width:48pt"></td>
 </tr>
  <td class="xl65">无</td>
  <td colspan="2" style="mso-ignore:colspan"></td>
 </tr>

 <tr height="18" style="height:13.8pt">
  <td rowspan="3" height="54" class="xl65" style="height:41.4pt">AccountService.registerAccount</td>
  <td class="xl65">语法</td>
  <td class="xl65">public registerAccount(UserVO userVO)；</td>
  <td colspan="2" style="mso-ignore:colspan"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td height="18" class="xl65" style="height:13.8pt">前置条件</td>
  <td class="xl65">无</td>
  <td colspan="2" style="mso-ignore:colspan"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td height="18" class="xl65" style="height:13.8pt">后置条件</td>
  <td class="xl65">更新用户列表</td>
  <td colspan="2" style="mso-ignore:colspan"></td>
 </tr>

 <tr height="18" style="height:13.8pt">
  <td rowspan="3" height="54" class="xl65" style="height:41.4pt">AccountService.login</td>
  <td class="xl65">语法</td>
  <td class="xl65">public login(UserForm userForm)；</td>
  <td colspan="2" style="mso-ignore:colspan"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td height="18" class="xl65" style="height:13.8pt">前置条件</td>
  <td class="xl65">无</td>
  <td colspan="2" style="mso-ignore:colspan"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td height="18" class="xl65" style="height:13.8pt">后置条件</td>
  <td class="xl65">系统为session分配空间</td>
  <td colspan="2" style="mso-ignore:colspan"></td>
 </tr>

 <tr height="18" style="height:13.8pt">
  <td rowspan="3" height="54" class="xl65" style="height:41.4pt">AccountService.getUserInfo</td>
  <td class="xl65">语法</td>
  <td class="xl65">public getUserInfo(int id)；</td>
  <td colspan="2" style="mso-ignore:colspan"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td height="18" class="xl65" style="height:13.8pt">前置条件</td>
  <td class="xl65">已登录用户账号</td>
  <td colspan="2" style="mso-ignore:colspan"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td height="18" class="xl65" style="height:13.8pt">后置条件</td>
  <td class="xl65">无</td>
  <td colspan="2" style="mso-ignore:colspan"></td>
 </tr>

 <tr height="18" style="height:13.8pt">
  <td rowspan="3" height="54" class="xl65" style="height:41.4pt">AccountService.updateUserInfo</td>
  <td class="xl65">语法</td>
  <td class="xl65">public updateUserInfo(int id, String password,String username,String phonenumber)；</td>
  <td colspan="2" style="mso-ignore:colspan"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td height="18" class="xl65" style="height:13.8pt">前置条件</td>
  <td class="xl65">已登录用户账号</td>
  <td colspan="2" style="mso-ignore:colspan"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td height="18" class="xl65" style="height:13.8pt">后置条件</td>
  <td class="xl65">更新用户信息</td>
  <td colspan="2" style="mso-ignore:colspan"></td>
 </tr>




 <tr height="18" style="height:13.8pt">
  <td colspan="3" height="18" class="xl66" style="height:13.8pt">需要的接口（需接口）</td>
  <td colspan="2" style="mso-ignore:colspan"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td colspan="2" height="18" class="xl65" style="height:13.8pt">AccountMapper.createNewAccount(User user)</span></td>
  <td class="xl65">创建新账号</td>
  <td colspan="2" style="mso-ignore:colspan"></td>
 </tr>

 <tr height="18" style="height:13.8pt">
  <td colspan="2" height="18" class="xl65" style="height:13.8pt">AccountMapper.getAccountByName(String email)</td>
  <td class="xl65">根据用户名返回账号</td>
  <td colspan="2" style="mso-ignore:colspan"></td>
 </tr>

 <tr height="18" style="height:13.8pt">
  <td colspan="2" height="18" class="xl65" style="height:13.8pt">AccountMapper.getAccountById(int id)</td>
  <td class="xl65">根据id返回账号</td>
  <td colspan="2" style="mso-ignore:colspan"></td>
 </tr>

 <tr height="18" style="height:13.8pt">
  <td colspan="2" height="18" class="xl65" style="height:13.8pt">AccountMapper.updateAccount( int id, String password,String username,String phonenumber)</td>
  <td class="xl65">更新用户信息</td>
  <td colspan="2" style="mso-ignore:colspan"></td>
 </tr>

 <tr height="18" style="height:13.8pt">
  <td colspan="2" height="18" class="xl65" style="height:13.8pt">po.User</td>
  <td class="xl65">用户实体类</td>
  <td colspan="2" style="mso-ignore:colspan"></td>
 </tr>

 <tr height="18" style="height:13.8pt">
  <td colspan="2" height="18" class="xl65" style="height:13.8pt">vo.UserForm</td>
  <td class="xl65">用户信息表单值类</td>
  <td colspan="2" style="mso-ignore:colspan"></td>
 </tr>

 <tr height="18" style="height:13.8pt">
  <td colspan="2" height="18" class="xl65" style="height:13.8pt">vo.ResponseVO</td>
  <td class="xl65">检查调用是否成功</td>
  <td colspan="2" style="mso-ignore:colspan"></td>
 </tr>

 <tr height="18" style="height:13.8pt">
  <td colspan="2" height="18" class="xl65" style="height:13.8pt">vo.UserVO</td>
  <td class="xl65">用户值类</td>
  <td colspan="2" style="mso-ignore:colspan"></td>
 </tr>
 
</tbody>
</table>




### 5.4 数据层分解

数据层主要给业务逻辑层提供数据访问服务，包括对于持久化数据的增、删、改、查。模块设计如图12所示

<div style="text-align:center;"><strong>图12 数据层模块设计<strong></strong><div></div>

#### 5.4.1 职责

数据层模块的职责如下表14所示。

<div style="text-align:center;"><strong>表14 数据层模块的职责<strong></strong><div></div>


| 模块                   | 职责                                                         |
| ---------------------- | ------------------------------------------------------------ |
| AdminData       | 基于 sql 数据库的持久化数据库的接口，提供酒店管理人员信息相关的增删改查服务 |
| CouponData      | 基于 sql 数据库的持久化数据库的接口，提供优惠券信息相关的增删改查服务 |
| HotelData       | 基于 sql 数据库的持久化数据库的接口，提供酒店信息相关的增删改查服务 |
| OrderData       | 基于 sql 数据库的持久化数据库的接口，提供订单信息相关的增删改查服务 |
| UserData        | 基于 sql 数据库的持久化数据库的接口，提供用户信息相关的增删改查服务 |

#### 5.4.2 接口规范

数据层模块AdminData、CouponData、HotelData、OrderData、UserData的接口规范分别如表15、表16、表17、表18、表19所示。

<div style="text-align:center;"><strong>表15 AdminData模块的接口规范<strong></strong><div></div>

| 供接口                             |                                  |                                                              |
| -------------------------------------- | -------------------------------- | ------------------------------------------------------------ |
| AdminData.addManager                  | 语法<br />前置条件<br />后置条件 | public int addManager(User user)<br />无<br />添加一个管理员，数据库更新记录 |
| AdminData.getAllManagers              | 语法<br />前置条件<br />后置条件 | public List<User> getAllManagers()<br />无<br />无        |
| 需接口                                 |                                |                                                          |
| 服务名                                 | 服务                           |                                                           |
| data.databaseutility.ConnectionFactory| 连接数据库                      |                                                           |
| PO.User                               | 表示用户实体                    |                                                           |


<div style="text-align:center;"><strong>表16 CouponData模块的接口规范<strong></strong><div></div>

| 供接口                             |                                  |                                                              |
| -------------------------------------- | -------------------------------- | ------------------------------------------------------------ |
| CouponData.insertCoupon                | 语法<br />前置条件<br />后置条件 | public int insertCoupon(Coupon coupon)<br />无<br />添加一张优惠券，数据库更新记录 |
| CouponData.selectByHotelId             | 语法<br />前置条件<br />后置条件 | public List<Coupon> selectByHotelId()<br />无<br />无        |
| 需接口                                  |                                  |                                                           |
| 服务名                                  | 服务                              |                                                           |
| data.databaseutility.ConnectionFactory | 连接数据库                         |                                                           |
| PO.Coupon                              | 表示优惠券实体                     |                                                           |


<div style="text-align:center;"><strong>表17 HotelData模块的接口规范<strong></strong><div></div>

| 供接口                             |                                  |                                                              |
| -------------------------------------- | -------------------------------- | ------------------------------------------------------------ |
| HotelData.insertHotel                  | 语法<br />前置条件<br />后置条件 | public int insertHotel(Hotel hotel)<br />无<br />添加一张优惠券，数据库更新记录 |
| HotelData.selectAllHotel               | 语法<br />前置条件<br />后置条件 | public List<HotelVO> selectAllHotel()<br />无<br />无        |
| HotelData.selectById                   | 语法<br />前置条件<br />后置条件 | public HotelVO selectById(@Param("id") Integer id)<br />无<br />无   | 
| HotelData.updateRoomInfo               | 语法<br />前置条件<br />后置条件 | public int updateRoomInfo(@Param("hotelId") Integer hotelId,@Param("roomType") String roomType,@Param("curNum") Integer curNum)<br />无<br />更新房间信息，数据库更新记录    |
| HotelData.insertRoom                   | 语法<br />前置条件<br />后置条件 | public int insertRoom(HotelRoom hotelRoom)<br />无<br />添加一个空余房间，数据库更新记录 |   
| HotelData.selectRoomsByHotelId         | 语法<br />前置条件<br />后置条件 | public List<HotelRoom> selectRoomsByHotelId(@Param("hotelId") Integer hotelId)<br />无<br />|
| HotelData.getRoomCurNum                | 语法<br />前置条件<br />后置条件 | public int getRoomCurNum(@Param("hotelId") Integer hotelId,@Param("roomType") String roomType)<br />无<br /> |
| 需接口                                  |                                  |                        |
| 服务名                                  | 服务                              |                       |
| data.databaseutility.ConnectionFactory | 连接数据库                         |                       |
| PO.Hotel                               | 表示酒店实体                       |                       |
| PO.HotelRoom                           | 表示酒店房间实体                    |                       |              


<div style="text-align:center;"><strong>表18 OrderData模块的接口规范<strong></strong><div></div>

| 供接口                             |                                  |                                                              |
| -------------------------------------- | -------------------------------- | ------------------------------------------------------------ |
| OrderData.addOrder                     | 语法<br />前置条件<br />后置条件 | public int addOrder(Order order)<br />无<br />添加一份订单，数据库更新记录 |
| OrderData.getAllOrders                 | 语法<br />前置条件<br />后置条件 | public List<Order> getAllOrders()<br />无<br />无        |
| OrderData.getUserOrders                | 语法<br />前置条件<br />后置条件 | public List<Order> getUserOrders(@Param("userid") int userid)<br />无<br />无   | 
| OrderData.annulOrder                   | 语法<br />前置条件<br />后置条件 | public int annulOrder(@Param("orderid") int orderid)<br />无<br />取消一份订单，数据库更新记录    |
| OrderData.getOrderById                 | 语法<br />前置条件<br />后置条件 | public Order getOrderById(@Param("orderid") int orderid)<br />无<br /> |   
| 需接口                                  |                                   |                       |
| 服务名                                  | 服务                              |                       |
| data.databaseutility.ConnectionFactory | 连接数据库                         |                       |
| PO.Order                              | 表示订单实体                       |                       |   


<div style="text-align:center;"><strong>表19 UserData模块的接口规范<strong></strong><div></div>

| 供接口                             |                                  |                                                              |
| -------------------------------------- | -------------------------------- | ------------------------------------------------------------ |
| UserData.createNewAccount              | 语法<br />前置条件<br />后置条件 | public int createNewAccount(User user)<br />无<br />创建一个新账号，数据库更新记录 |
| UserData.getAccountByName              | 语法<br />前置条件<br />后置条件 | public User getAccountByName(@Param("email") String email)<br />无<br />无        |
| UserData.getAccountById                | 语法<br />前置条件<br />后置条件 | public User getAccountById(@Param("id") int id)<br />无<br />无   | 
| UserData.updateAccount                 | 语法<br />前置条件<br />后置条件 | public int updateAccount(@Param("id") int id, @Param("password") String password,@Param("userName") String username, @Param("phoneNumber") String phonenumber)<br />无<br />更新账号信息，数据库更新记录    |
| 需接口                                  |                                   |                       |
| 服务名                                  | 服务                              |                       |
| data.databaseutility.ConnectionFactory | 连接数据库                         |                       |
| PO.User                                | 表示用户实体                       |                       |                      

### 6 信息视角

在此对系统的实体类做简单的介绍：

- Coupon: 优惠券id、优惠券描述、优惠名称、优惠券使用门槛、折扣、优惠券金额、可用时间、失效时间、优惠券状态
- Hotel：酒店id、酒店名称、酒店地址、、简介、设施服务、客房类型、价格、酒店工作人员的 姓名或名称、联系方式 
- HotelRoom：简介、价格、总数量、已占用数量列表 
- Order: 订单id、用户id、酒店id、酒店名称、入住时间、退房时间、房间类型、房间数量、用户人数、有无儿童、价格、客户名称、客户电话、单号
- User：用户id、用户邮箱地址、账号密码、用户姓名、电话号码、信用度、用户类型


```java
@Data
public class Coupon {
    /**
     * 优惠券id
     */
    private int id;
    /**
     * 优惠券描述
     */
    private String description;

    /**
     * 如果为-1 代表是网站推出的优惠
     */
    private Integer hotelId;

    /**
     * 优惠券类型 1生日特惠 2多间特惠 3满减优惠 4限时优惠
     */
    private Integer couponType;
    /**
     * 优惠券名称
     */
    private String couponName;
    /**
     * 优惠券使用门槛
     */
    private double targetMoney;

    /**
     * 折扣
     */
    private double discount;
    /**
     * 优惠券优惠金额
     */
    private double discountMoney;
    /**
     * 可用时间
     */
    private LocalDateTime startTime;
    /**
     * 失效时间
     */
    private LocalDateTime endTime;

    /**
     * 优惠券状态 是否已经失效 1可用 0失效
     */
    private Integer status;

    public LocalDateTime getStartTime() {
        return startTime;
    }

    public void setStartTime(LocalDateTime startTime) {
        this.startTime = startTime;
    }

    public LocalDateTime getEndTime() {
        return endTime;
    }

    public void setEndTime(LocalDateTime endTime) {
        this.endTime = endTime;
    }

    public int getId() {
        return id;
    }

    public void setId(int id) {
        this.id = id;
    }

    public String getDescription() {
        return description;
    }

    public void setDescription(String description) {
        this.description = description;
    }

    public String getCouponName() {
        return couponName;
    }

    public void setCouponName(String couponName) {
        this.couponName = couponName;
    }

    public double getTargetMoney() {
        return targetMoney;
    }

    public void setTargetMoney(double targetMoney) {
        this.targetMoney = targetMoney;
    }

    public double getDiscountMoney() {
        return discountMoney;
    }

    public void setDiscountMoney(double discountMoney) {
        this.discountMoney = discountMoney;
    }

    public Integer getHotelId() {
        return hotelId;
    }

    public void setHotelId(Integer hotelId) {
        this.hotelId = hotelId;
    }

    public Integer getCouponType() {
        return couponType;
    }

    public void setCouponType(Integer couponType) {
        this.couponType = couponType;
    }

    public Integer getStatus() {
        return status;
    }

    public void setStatus(Integer status) {
        this.status = status;
    }

    public double getDiscount() {
        return discount;
    }

    public void setDiscount(double discount) {
        this.discount = discount;
    }

    public Coupon() {
    }
}
public class Hotel {
    private Integer id;
    private String hotelName;
    private String address;
    /**
     * 商圈
     */
    private BizRegion bizRegion;
    private HotelStar hotelStar;
    private Double rate;
    private String description;
    private String phoneNum;
    /**
     * 酒店管理员id
     */
    private Integer managerId;

    public Integer getId() {
        return id;
    }

    public void setId(Integer id) {
        this.id = id;
    }

    public String getHotelName() {
        return hotelName;
    }

    public void setHotelName(String hotelName) {
        this.hotelName = hotelName;
    }

    public String getAddress() {
        return address;
    }

    public void setAddress(String address) {
        this.address = address;
    }

    public BizRegion getBizRegion() {
        return bizRegion;
    }

    public void setBizRegion(BizRegion bizRegion) {
        this.bizRegion = bizRegion;
    }

    public HotelStar getHotelStar() {
        return hotelStar;
    }

    public void setHotelStar(HotelStar hotelStar) {
        this.hotelStar = hotelStar;
    }

    public Double getRate() {
        return rate;
    }

    public void setRate(Double rate) {
        this.rate = rate;
    }

    public String getDescription() {
        return description;
    }

    public void setDescription(String description) {
        this.description = description;
    }

    public String getPhoneNum() {
        return phoneNum;
    }

    public void setPhoneNum(String phoneNum) {
        this.phoneNum = phoneNum;
    }

    public Integer getManagerId() {
        return managerId;
    }

    public void setManagerId(Integer managerId) {
        this.managerId = managerId;
    }
}
public class HotelRoom {
    private Integer id;
    private RoomType roomType;
    private Integer hotelId;
    private double price;
    /**
     * 当前剩余可预定房间数
     */
    private int curNum;
    /**
     * 某类型房间总数
     */
    private int total;

    public Integer getId() {
        return id;
    }

    public void setId(Integer id) {
        this.id = id;
    }

    public RoomType getRoomType() {
        return roomType;
    }

    public void setRoomType(RoomType roomType) {
        this.roomType = roomType;
    }

    public Integer getHotelId() {
        return hotelId;
    }

    public void setHotelId(Integer hotelId) {
        this.hotelId = hotelId;
    }

    public double getPrice() {
        return price;
    }

    public void setPrice(double price) {
        this.price = price;
    }

    public int getCurNum() {
        return curNum;
    }

    public void setCurNum(int curNum) {
        this.curNum = curNum;
    }

    public int getTotal() {
        return total;
    }

    public void setTotal(int total) {
        this.total = total;
    }
}
public class Order {
    private Integer id;
    private Integer userId;
    private Integer hotelId;
    private String hotelName;
    private String checkInDate;
    private String checkOutDate;
    private String roomType;
    private Integer roomNum;
    private Integer peopleNum;
    private boolean haveChild;
    private String createDate;
    private Double price;
    private String clientName;
    private String phoneNumber;
    private String orderState;

    public Integer getId() {
        return id;
    }

    public void setId(Integer id) {
        this.id = id;
    }

    public Integer getUserId() {
        return userId;
    }

    public void setUserId(Integer userId) {
        this.userId = userId;
    }

    public Integer getHotelId() {
        return hotelId;
    }

    public void setHotelId(Integer hotelId) {
        this.hotelId = hotelId;
    }

    public String getCheckInDate() {
        return checkInDate;
    }

    public void setCheckInDate(String checkInDate) {
        this.checkInDate = checkInDate;
    }

    public String getCheckOutDate() {
        return checkOutDate;
    }

    public void setCheckOutDate(String checkOutDate) {
        this.checkOutDate = checkOutDate;
    }

    public String getRoomType() {
        return roomType;
    }

    public void setRoomType(String roomType) {
        this.roomType = roomType;
    }

    public Integer getRoomNum() {
        return roomNum;
    }

    public void setRoomNum(Integer roomNum) {
        this.roomNum = roomNum;
    }

    public Integer getPeopleNum() {
        return peopleNum;
    }

    public void setPeopleNum(Integer peopleNum) {
        this.peopleNum = peopleNum;
    }

    public boolean isHaveChild() {
        return haveChild;
    }

    public void setHaveChild(boolean haveChild) {
        this.haveChild = haveChild;
    }

    public String getCreateDate() {
        return createDate;
    }

    public void setCreateDate(String createDate) {
        this.createDate = createDate;
    }

    public Double getPrice() {
        return price;
    }

    public void setPrice(Double price) {
        this.price = price;
    }

    public String getHotelName() {
        return hotelName;
    }

    public void setHotelName(String hotelName) {
        this.hotelName = hotelName;
    }

    public String getClientName() {
        return clientName;
    }

    public void setClientName(String clientName) {
        this.clientName = clientName;
    }

    public String getPhoneNumber() {
        return phoneNumber;
    }

    public void setPhoneNumber(String phoneNumber) {
        this.phoneNumber = phoneNumber;
    }

    public String getOrderState() {
        return orderState;
    }

    public void setOrderState(String orderState) {
        this.orderState = orderState;
    }
}
public class User {
    private Integer id;
    private String email;
    private String password;
    private String userName;
    private String phoneNumber;
    private double credit;
    private UserType userType;

    public Integer getId() {
        return id;
    }

    public void setId(Integer id) {
        this.id = id;
    }

    public String getUserName() {
        return userName;
    }

    public void setUserName(String userName) {
        this.userName = userName;
    }

    public String getPhoneNumber() {
        return phoneNumber;
    }

    public void setPhoneNumber(String phoneNumber) {
        this.phoneNumber = phoneNumber;
    }

    public double getCredit() {
        return credit;
    }

    public void setCredit(double credit) {
        this.credit = credit;
    }

    public String getEmail() {
        return email;
    }

    public void setEmail(String email) {
        this.email = email;
    }

    public String getPassword() {
        return password;
    }

    public void setPassword(String password) {
        this.password = password;
    }

    public UserType getUserType() {
        return userType;
    }

    public void setUserType(UserType userType) {
        this.userType = userType;
    }
}
